<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    <link rel="stylesheet" type="text/css" th:href="@{/styles.css}">
</head>
<body>
<div class="wrapper" style="margin-left: 10px;margin-top: 10px;font-size: 20px">

    <div class="rightbox">
        <!--        <div class="welcome-message">订单管理</div>-->
        <form id="search" method="post">
            <input type="text" id="search_code" placeholder="请输入订单编号">
            <button type="submit" onclick="searchForm()">查询</button>
        </form>
        <div th:if="${orderArray.itemOrders.isEmpty()}">
            <p>没有找到相关订单</p>
        </div>
        <table th:if="${not orderArray.itemOrders.isEmpty()}">
            <thead>
            <tr>
                <th style="text-align: center; border: 1px solid black;">序号</th>
                <th style="text-align: center; border: 1px solid black;">订单编号</th>
                <th style="text-align: center; border: 1px solid black;">用户ID</th>
                <th style="text-align: center; border: 1px solid black;">商品ID</th>
                <th style="text-align: center; border: 1px solid black;">下单时间</th>
                <th style="text-align: center; border: 1px solid black;">购买数量</th>
                <th style="text-align: center; border: 1px solid black;">订单状态</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="itemOrder : ${orderArray?.itemOrders}">
                <td th:text="${itemOrder?.id}" style="text-align: center; border: 1px solid black;"></td>
                <td th:text="${itemOrder?.code}" style="text-align: center; border: 1px solid black;"></td>
                <td th:text="${itemOrder?.userName}" style="text-align: center; border: 1px solid black;"></td>
                <td th:text="${itemOrder?.itemId}" style="text-align: center; border: 1px solid black;"></td>
                <td th:text="${itemOrder?.addTime}" style="text-align: center; border: 1px solid black;"></td>
                <td th:text="${itemOrder?.total}" style="text-align: center; border: 1px solid black;"></td>

                <!-- 状态列保持居中并添加边框 -->
                <td style="text-align: center; border: 1px solid black;">
        <span th:switch="${itemOrder?.status}" >
            <span th:case="0">待发货</span>
            <span th:case="1">已取消</span>
            <span th:case="2">已发货</span>
            <span th:case="3">已收货</span>
            <span th:case="4">已评价</span>
            <span th:case="*">未知状态</span>
        </span>
                </td>

                <!-- 操作列保持居中并添加边框 -->
                <td >
                    <a th:href="@{/itemOrder/detail/{id}(id=${itemOrder?.id})}">查看详情</a>
                </td>
            </tr>

<!--             在表格标签中添加边框合并样式（确保所有边框对齐）-->
            <table style="border-collapse: collapse;">
                <!-- 原有表格内容 -->
            </table>
            </tbody>
        </table>
        <!--    <div th:if="${not orderArray.itemOrders.isEmpty()}">-->
        <!--      <a th:each="i : ${#numbers.sequence(1, pagers.total)}"-->
        <!--         th:href="@{/itemOrder/findBySql(page=${i}, code=${obj.code})}"-->
        <!--         th:text="${i}"></a>-->
        <!--    </div>-->
    </div>
</div>


<script>
    function searchForm(){
        let code = document.getElementById("search_code").value;
        if (code.trim() === '') {
            code = 'null';
        }
        document.getElementById("search").action = `/itemOrder/orderForm/${code}`;
        document.getElementById("search").submit();

    }
</script>


</body>
</html>
